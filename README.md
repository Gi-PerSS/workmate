# Workmate CSV Processor

Мощный скрипт на Python для обработки CSV-файлов с продвинутыми возможностями фильтрации, агрегации и сортировки, созданный с использованием стандартных библиотек и тщательно протестированный с помощью pytest.

## Возможности

- **Фильтрация**: Поддержка условий `where` с операторами `>`, `<`, `>=`, `<=`, `=`, `!=` для точного выбора данных.
- **Сортировка**: Поддержка `order-by` для сортировки данных по возрастанию (`asc`) или убыванию (`desc`) по указанному полю.
- **Агрегация**: Вычисление `avg`, `min`, `max` и `median` для числовых столбцов, обеспечивая надежный анализ данных.
- **Ввод**: Прием пути к CSV-файлу и аргументов через `argparse` для гибкого взаимодействия через командную строку.
- **Вывод**: Отображение результатов в удобном табличном формате с использованием `tabulate` для улучшенной читаемости.
- **Расширяемость**: Модульная архитектура позволяет легко добавлять новые типы агрегации или команды.
- **Тестирование**: Покрытие кода тестами более 90% с использованием `pytest` для модульных и end-to-end тестов.
- **Надежность**: Аннотации типов и обработка ошибок обеспечивают удобство поддержки и надежность кода.

## Структура проекта

```
.
├── Workmate/
│   ├── project/
│   │   ├── main.py         # Точка входа для выполнения через CLI
│   │   ├── controller/     # Парсинг CLI и логика диспетчеризации
│   │   ├── model/          # Парсинг CSV, обработка данных и утилиты
│   │   ├── view/           # Форматирование и вывод результатов
│   │   └── tests/          # Модульные и end-to-end тесты
├── sample/
│   └── products.csv        # Пример CSV-файла для тестирования
├── requirements.txt         # Зависимости проекта
└── README.md
```

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone <ссылка-на-репозиторий>
   cd Workmate
   ```
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Наслаждайтесь!:
   ```bash
   python -m project.main --file sample/products.csv --where "price>500" --aggregate "price=avg"
   ```

## Примеры использования

- Фильтрация товаров с ценой > 500:
  ```bash
  python -m project.main --file sample/products.csv --where "price>500"
  ```
- Фильтрация товаров с ценой > 500 и выводом списка в порядке убывания:
  ```bash
  python -m project.main --file sample/products.csv --where "price>500" --order-by "price=desc"
  ```
- Вычисление средней цены:
  ```bash
  python -m project.main --file sample/products.csv --aggregate "price=avg"
  ```
- Фильтрация по бренду Apple и максимальная цена:
  ```bash
  python -m project.main --file sample/products.csv --where "brand=apple" --aggregate "price=max"
  ```

## Запуск тестов

```bash
pytest project/tests
pytest --cov=project
```

## Требования

- Python 3.12+
- Стандартные библиотеки: `argparse`, `csv`
- Внешняя библиотека: `tabulate` (для вывода в консоль)
- Тестирование: `pytest`, `pytest-cov`

## Примечания

- Аннотации типов улучшают читаемость и удобство поддержки кода.
- Модульная структура поддерживает добавление новых операторов или агрегаций.
- Обширный набор тестов гарантирует надежность для различных сценариев использования.
